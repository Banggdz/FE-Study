###  `cloneNode` và `outerHTML` trong JavaScript

Cả `cloneNode` và `outerHTML` đều dùng để sao chép hoặc lấy nội dung của một phần tử DOM (Document Object Model) trong JavaScript, nhưng chúng khác nhau về **kiểu dữ liệu trả về**, **cách sử dụng** và **hành vi**. Dưới đây là phân tích chi tiết:

#### 1. **outerHTML**:
- **Loại**: Đây là một **thuộc tính (property)** của phần tử Element.
- **Trả về**: Một **chuỗi (string)** chứa toàn bộ mã HTML của phần tử, bao gồm tag mở/đóng của chính nó và tất cả nội dung bên trong (các phần tử con, attribute, v.v.).
- **Hành vi**:
  - Chỉ đọc (read-only) ở hầu hết trình duyệt, nhưng có thể gán giá trị mới để thay thế phần tử.
  - Không tạo bản sao thực sự trong DOM; chỉ lấy string HTML để bạn có thể sử dụng sau (ví dụ: insert vào nơi khác qua `innerHTML`).
  - Nếu phần tử có event listener hoặc trạng thái động (như input value), chúng không được copy (vì chỉ là string tĩnh).
- **Ưu điểm**: Dễ dàng lấy HTML dưới dạng text để lưu trữ, gửi qua network, hoặc parse thủ công.
- **Nhược điểm**: Phải parse string để tạo element mới (sử dụng `DOMParser` hoặc `innerHTML`), có thể chậm nếu element phức tạp.

**Ví dụ**:
```javascript
const div = document.getElementById('myDiv');  // <div id="myDiv">Nội dung</div>
console.log(div.outerHTML);  // "<div id="myDiv">Nội dung</div>"

// Sao chép bằng outerHTML (thay thế)
div.outerHTML = '<p>Mới</p>';  // Thay div bằng <p>
```

#### 2. **cloneNode**:
- **Loại**: Đây là một **phương thức (method)** của Node (thường dùng với Element).
- **Trả về**: Một **bản sao của phần tử DOM (Node object)**, không phải string. Bản sao này có thể insert trực tiếp vào DOM mà không cần parse.
- **Hành vi**:
  - Nhận tham số boolean: `cloneNode(true)` để **deep clone** (sao chép cả các phần tử con, attribute, text, v.v.); `cloneNode(false)` chỉ sao chép superficial (chỉ tag chính, không con cái).
  - Bản sao là một object độc lập, nhưng nếu deep clone, các event listener **không được copy** (trừ khi dùng kỹ thuật khác như `addEventListener` lại).
  - Giữ nguyên trạng thái (như value của input), nhưng ID có thể trùng nếu không thay đổi thủ công (dẫn đến conflict).
- **Ưu điểm**: Tạo element thực tế để thao tác DOM nhanh chóng, giữ cấu trúc object.
- **Nhược điểm**: Không lấy được dưới dạng string trực tiếp; phải dùng thêm `outerHTML` nếu cần string.

**Ví dụ**:
```javascript
const div = document.getElementById('myDiv');  // <div id="myDiv">Nội dung</div>
const clone = div.cloneNode(true);  // Deep clone: Bản sao đầy đủ
document.body.appendChild(clone);  // Thêm bản sao vào body
```

#### Sự khác biệt chính tóm tắt (bảng so sánh):
| Tiêu chí          | outerHTML                          | cloneNode                          |
|-------------------|------------------------------------|------------------------------------|
| **Kiểu trả về**   | Chuỗi HTML (string)                | Phần tử DOM (Node object)          |
| **Sao chép con cái** | Luôn bao gồm (như string)          | Tùy chọn (true: deep, false: shallow) |
| **Thao tác DOM**  | Phải parse string để insert        | Insert trực tiếp (appendChild, v.v.) |
| **Event listener**| Không copy                         | Không copy (cần add lại)           |
| **Usage phổ biến**| Lấy HTML để lưu/send/parse        | Sao chép element để reuse trong DOM|
| **Hiệu suất**     | Chậm hơn nếu parse lớn             | Nhanh hơn cho DOM manipulation     |

#### Khi nào dùng cái nào?
- Dùng **outerHTML** nếu bạn cần HTML dưới dạng text (ví dụ: in popup như code của bạn, lưu file, hoặc gửi AJAX).
- Dùng **cloneNode** nếu bạn cần làm việc với DOM object (ví dụ: tạo nhiều instance của một template, thêm event).

Nếu bạn cần ví dụ code chạy thực tế hoặc giải thích thêm về trường hợp cụ thể (như trong popup của bạn), cho tôi biết nhé!
